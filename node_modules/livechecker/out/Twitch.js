"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const got = require("got");
class Twitch {
    /**
     * @param TWKey Your Twitch App's API key
     */
    constructor(TWKey) {
        this.TWKey = TWKey;
    }
    /**
     * Return some data about a user.
     * @param user The name of the user
     * @returns User data
     */
    getUser(user) {
        let appthis = this;
        return new Promise(function (resolve, reject) {
            got(`https://api.twitch.tv/kraken/users/${user}?client_id=${appthis.TWKey}`)
                .then((resp) => {
                let data = JSON.parse(resp.body);
                if (data.error)
                    resolve(undefined);
                else
                    resolve(data);
            })
                .catch((err) => {
                if (err.statusCode === 404)
                    return resolve(undefined);
                else
                    reject(err);
            });
        });
    }
    /**
     * Return some data about the stream of a channel.
     * @param user The name of the user
     * @returns Stream data
     */
    isStreaming(user) {
        let appthis = this;
        return new Promise(function (resolve, reject) {
            got(`https://api.twitch.tv/kraken/streams/${user}?client_id=${appthis.TWKey}`)
                .then((resp) => {
                let data = JSON.parse(resp.body);
                if (data.stream)
                    resolve(data);
                else
                    resolve(undefined);
            })
                .catch((err) => {
                reject(err);
            });
        });
    }
}
exports.Twitch = Twitch;
